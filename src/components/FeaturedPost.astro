---
import { format } from "date-fns";

import Tag from "./Tag.astro";

interface Props {
  slug: string;
  title: string;
  publishedAt: string;
  description: string;
  category: {
    name: string;
    content: {
      hue: string;
    };
  };
  cover: Record<string, any>;
}

const placeholderPublicationDate = new Date();

const publicationDate = format(
  Astro.props.publishedAt ?? placeholderPublicationDate,
  "PPp"
);
---

<a
  href=`/blog/${Astro.props.slug}`
  class=`[ clear-link-styles bar-hover-link ]`
  style=`--tag-color: hsl(${Astro.props.category.content.hue}, 93%, 40%);`
>
  <article class=`[ flow ]`>
    <img src={Astro.props.cover.filename} alt={Astro.props.cover.alt} />
    <h2>{Astro.props.title}</h2>
    <p class="[ flow-inline ]">
      <time datetime={publicationDate}>{publicationDate}</time>
      <Tag>{Astro.props.category.name}</Tag>
    </p>
    <p>
      {Astro.props.description}
    </p>
  </article>
</a>
